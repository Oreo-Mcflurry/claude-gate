#!/usr/bin/env bash
set -euo pipefail

SOURCE="$0"
while [ -L "$SOURCE" ]; do
  DIR="$(cd "$(dirname "$SOURCE")" && pwd)"
  SOURCE="$(readlink "$SOURCE")"
  [[ "$SOURCE" != /* ]] && SOURCE="$DIR/$SOURCE"
done
PACKAGE_DIR="$(cd "$(dirname "$SOURCE")/.." && pwd)"

case "${1:-install}" in
  install)
    bash "$PACKAGE_DIR/install.sh"
    ;;
  uninstall)
    bash "$PACKAGE_DIR/uninstall.sh"
    ;;
  *)
    echo "Usage: claude-gate [install|uninstall]"
    echo ""
    echo "  install     Install Claude Gate (default)"
    echo "  uninstall   Remove Claude Gate"
    exit 1
    ;;
esac
